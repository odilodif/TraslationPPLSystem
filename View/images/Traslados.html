
<!-- saved from url=(0055)http://localhost/TraslationPPLSystem/?page=DirectorView -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><style media="screen">
  *{
      /*border: 1px solid #C00;*/

  }
</style>



    
        
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="author" content="">

        <title>Traslados</title>

        <link rel="shortcut icon" href="http://localhost/TraslationPPLSystem/View/images/bus-png-40030.png" type="image/x-icon" sizes="65x50">
        <!-- Bootstrap Core CSS -->
        <link href="./Traslados_files/bootstrap.min.css" rel="stylesheet" type="text/css">
              <!-- Custom CSS -->
              <link href="./Traslados_files/sb-admin.css" rel="stylesheet">
              <!-- Custom Fonts -->
              <link href="./Traslados_files/font-awesome.min.css" rel="stylesheet" type="text/css">
              <link href="./Traslados_files/indexstyle.css" rel="stylesheet" type="text/css">

              <!-- jQuery -->
             <script src="./Traslados_files/jquery.js" type="text/javascript"></script>
             
              <script src="./Traslados_files/bootstrap.min.js" type="text/javascript"></script>
              <!--Customize-->
              <link href="./Traslados_files/customize.css" rel="stylesheet" type="text/css">
              <script src="./Traslados_files/customize.js" type="text/javascript"></script>
              <!--Utils-->
              <script src="./Traslados_files/utils.js" type="text/javascript"></script>

    </head>

    <body>
        <div id="wrapper">
            <!-- Navigation -->
            <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
                <ul class="nav navbar-right top-nav">
                   <li class="dropdown">
                        <a href="http://localhost/TraslationPPLSystem/?page=DirectorView#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-envelope"></i> <b class="caret"></b></a>
                        <ul class="dropdown-menu message-dropdown">
                            <li class="message-preview">
                                <a href="http://localhost/TraslationPPLSystem/?page=DirectorView#">
                                    <div class="media">
                                        <span class="pull-left">
                                            <img class="media-object" src="http://localhost/TraslationPPLSystem/?page=DirectorView" alt="">
                                        </span>
                                        <div class="media-body">
                                            <h5 class="media-heading"><strong>Administrador</strong>
                                            </h5>
                                            <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                            <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="message-preview">
                                <a href="http://localhost/TraslationPPLSystem/?page=DirectorView#">
                                    <div class="media">
                                        <span class="pull-left">
                                            <img class="media-object" src="http://localhost/TraslationPPLSystem/?page=DirectorView" alt="">
                                        </span>
                                        <div class="media-body">
                                            <h5 class="media-heading"><strong>John Smith</strong>
                                            </h5>
                                            <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                            <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="message-preview">
                                <a href="http://localhost/TraslationPPLSystem/?page=DirectorView#">
                                    <div class="media">
                                        <span class="pull-left">
                                            <img class="media-object" src="http://localhost/TraslationPPLSystem/?page=DirectorView" alt="">
                                        </span>
                                        <div class="media-body">
                                            <h5 class="media-heading"><strong>John Smith</strong>
                                            </h5>
                                            <p class="small text-muted"><i class="fa fa-clock-o"></i> Yesterday at 4:32 PM</p>
                                            <p>Lorem ipsum dolor sit amet, consectetur...</p>
                                        </div>
                                    </div>
                                </a>
                            </li>
                            <li class="message-footer">
                                <a href="http://localhost/TraslationPPLSystem/?page=DirectorView#">Read All New Messages</a>
                            </li>
                        </ul>
                    </li>

    <div class="navbar-header">
        <a class="navbar-brand" href="http://localhost/TraslationPPLSystem/?pagina=home"><img class="user-login" src="./Traslados_files/user2-160x160.jpg" style=""></a>
    </div>
    <li class="dropdown">
        <a href="http://localhost/TraslationPPLSystem/?page=DirectorView#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-user"></i>Olympo Guaña<b class="caret"></b></a>
        <ul class="dropdown-menu">
            <li>
                <a href="http://localhost/TraslationPPLSystem/?page=DirectorView#"><i class="fa fa-fw fa-user"></i> Profile</a>
            </li>
            <li>
                <a href="http://localhost/TraslationPPLSystem/?page=DirectorView#"><i class="fa fa-fw fa-envelope"></i> Inbox</a>
            </li>
            <li>
                <a href="http://localhost/TraslationPPLSystem/?page=DirectorView#"><i class="fa fa-fw fa-gear"></i> Settings</a>
            </li>
            <li class="divider"></li>
            <li>
                <a href="http://localhost/TraslationPPLSystem/View/login.php?exit=1"><i class="fa fa-fw fa-power-off"></i> Salir</a>
            </li>
        </ul>
    </li>
</ul>

 <div class="collapse navbar-collapse navbar-ex1-collapse">
     <ul class="nav navbar-nav side-nav">
 <li class="active"><a href="http://localhost/TraslationPPLSystem/?page=DirectorView"><i class="fa fa-fw fa-dashboard"></i>Solicitud Traslado PPL</a></li>     </ul>
   </div>


                <!-- /.navbar-collapse -->
            </nav>

            <div id="page-wrapper">
                <div class="container-fluid">
                    <!--                    <div id="load">
                                            <img src="./views/images/ajax-loader.gif"
                                        </div>-->


                    
<script src="./Traslados_files/director.js" type="text/javascript"></script>

<!--Libraries for DataTables-->
<link rel="stylesheet" type="text/css" href="./Traslados_files/dataTables.bootstrap.min.css">

<script src="./Traslados_files/jquery.dataTables.min.js" type="text/javascript"></script>
<script src="./Traslados_files/dataTables.bootstrap.min.js" type="text/javascript"></script>



<!-- Page Heading -->
<div class="row">
    <div class="col-lg-12">
        <h1 class="page-header">
            </h1><h1><img src="./Traslados_files/auction.png" style="height:2%;width: 2%"><small>SNAI - Sistema de Traslados   </small></h1>
        
        <ol class="breadcrumb">
            <li class="active">
                <button type="button" class="btn btn-info" id="btnNewTraslation">Nuevo</button>  <i class="fa fa-dashboard"></i> Solicitud de Traslado PPL
            </li>
        </ol>
    </div>
</div>
    <div class="col-lg-12">

    </div>
</div>
<style>
    .example-modal .modal {
        position: relative;
        top: auto;
        bottom: auto;
        right: auto;
        left: auto;
        display: block;
        z-index: 1;
    }

    .example-modal .modal {
        background: transparent !important;
    }


    .grid-container {
        display: grid;
        grid-template-columns: auto auto auto auto;
        grid-gap: 10px;

        padding: 10px;
    }

    .grid-container > div {
        background-color: rgba(255, 255, 255, 0.8);
        /*border: 1px solid black;
        text-align: center;*/

    }
</style>

<div class="wrapper">
    <!-- Content Wrapper. Contains page content -->
    <div class="content-wrapper">

        <!-- Main content -->
        <section class="content">
            <div class="row">
                <div class="col-xs-12">
                    <div id="respuestaAjax"></div>
                    <div class="">
                        <div class="box-body">
                            <div class="">                                 
                                <!-- <div class="" style="width:auto; height: 300px; overflow-y: scroll;">-->
                                <div class="">
                               <!--<table border="1" id="tblTraslationList">
                                   <thead>
                                       <tr>
                                       <th>Nro.</th>  <th>Fecha</th>  <th>Tipo de Traslado</th>  <th>CPL Destino</th>  <th>Estado</th><!--<th colspan="2">Opciones</th>
                                       </tr>
                                   </thead>
                                   <tbody>

                                   </tbody>
                               </table>-->
                                    <table id="tblTraslationList" class="table table-striped table-bordered dataTable" style="width:100%">
                                        <thead>
                                            <tr>
                                                <th>Nro.</th>
                                                <th>Fecha</th>
                                                <th>Tipo de Traslado</th>
                                                <th>CPL Destino</th>
                                                <th>Estado</th>

                                            </tr>
                                        </thead>
                                        <tbody>

                                        <tr><td>0309</td><td>2019-09-04</td><td>Cercanía Familiar</td><td>CRS TULCAN</td><td>Ejecutado</td><td><a href="javascript:editTraslationDirectorCrs(0309,&quot;Ejecutado&quot;);" class="glyphicon glyphicon-edit"></a></td><td><a href="javascript:deleteeditTraslationDirectorCrsDialog(0309, &quot;2019-09-04&quot; );" class="glyphicon glyphicon-remove-circle"> </a></td></tr><tr><td>0310</td><td>2019-09-04</td><td>Cercanía Familiar</td><td>CRS GUAYAQUIL VARONES 1</td><td>Ejecutado</td><td><a href="javascript:editTraslationDirectorCrs(0310,&quot;Ejecutado&quot;);" class="glyphicon glyphicon-edit"></a></td><td><a href="javascript:deleteeditTraslationDirectorCrsDialog(0310, &quot;2019-09-04&quot; );" class="glyphicon glyphicon-remove-circle"> </a></td></tr><tr><td>0311</td><td>2019-09-04</td><td>Cercanía Familiar</td><td>CRS TULCAN</td><td>Ejecutado</td><td><a href="javascript:editTraslationDirectorCrs(0311,&quot;Ejecutado&quot;);" class="glyphicon glyphicon-edit"></a></td><td><a href="javascript:deleteeditTraslationDirectorCrsDialog(0311, &quot;2019-09-04&quot; );" class="glyphicon glyphicon-remove-circle"> </a></td></tr><tr><td>0312</td><td>2019-09-05</td><td>Cercanía Familiar</td><td>Turi</td><td>Ejecutado</td><td><a href="javascript:editTraslationDirectorCrs(0312,&quot;Ejecutado&quot;);" class="glyphicon glyphicon-edit"></a></td><td><a href="javascript:deleteeditTraslationDirectorCrsDialog(0312, &quot;2019-09-05&quot; );" class="glyphicon glyphicon-remove-circle"> </a></td></tr><tr><td>0314</td><td>2019-09-06</td><td>Hacinamiento</td><td>Latacunga</td><td>Inicio</td><td><a href="javascript:editTraslationDirectorCrs(0314,&quot;Inicio&quot;);" class="glyphicon glyphicon-edit"></a></td><td><a href="javascript:deleteeditTraslationDirectorCrsDialog(0314, &quot;2019-09-06&quot; );" class="glyphicon glyphicon-remove-circle"> </a></td></tr><tr><td>0315</td><td>2019-09-06</td><td>Cercanía Familiar</td><td>CRS GUAYAQUIL VARONES 1</td><td>Inicio</td><td><a href="javascript:editTraslationDirectorCrs(0315,&quot;Inicio&quot;);" class="glyphicon glyphicon-edit"></a></td><td><a href="javascript:deleteeditTraslationDirectorCrsDialog(0315, &quot;2019-09-06&quot; );" class="glyphicon glyphicon-remove-circle"> </a></td></tr><tr><td>0316</td><td>2019-09-06</td><td>Cercanía Familiar</td><td>CRS GUAYAQUIL VARONES 1</td><td>Inicio</td><td><a href="javascript:editTraslationDirectorCrs(0316,&quot;Inicio&quot;);" class="glyphicon glyphicon-edit"></a></td><td><a href="javascript:deleteeditTraslationDirectorCrsDialog(0316, &quot;2019-09-06&quot; );" class="glyphicon glyphicon-remove-circle"> </a></td></tr></tbody>
                                        <tfoot>
                                            <tr>
                                                <th>Nro.</th>
                                                <th>Fecha</th>
                                                <th>Tipo de Traslado</th>
                                                <th>CPL Destino</th>
                                                <th>Estado</th>

                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>

                            </div>

                        </div>
                    </div>
                </div>
            </div>
            <!---Modals Section-->

            <!-- /.modal -->

            <!-- /.modal -->



            <div class="modal fade" id="TraslationNew" role="dialog" data-toggle="modal" data-backdrop="static" data-keyboard="false">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">×</span></button>


                        </div>
                        <div class="modal-body">

                            <form id="fmrCreateTraslation" action="http://localhost/TraslationPPLSystem/?page=DirectorView" method="POST" enctype="multipart/form-data">                           

                                <input type="text" id="idTraslation" name="idTraslation" readonly="" style="color:red">
                                <div class="grid-container">
                                    <div class="item1"><label>Tipo de Traslado</label></div>
                                    <div class="item2">
                                        <div>
                                            <select id="trasl_type_id" name="trasl_type_id" required="">
                                                <option value="0">Selecionar Tipo de Traslados </option>
                                            <option value="4">Cercanía Familiar</option><option value="5">Hacinamiento</option><option value="6">Separación</option><option value="1">Orden Judicial</option><option value="7">Madres con Niños Menores 36m</option><option value="3">Salud</option><option value="2">Seguridad</option></select>
                                        </div>
                                    </div>
                                    <div class="item3">  <labe>Fecha</labe></div>
                                    <div class="item4">
                                        <input id="txt_date_request_traslation" name="txt_date_request_traslation" type="date" value="" required="">

                                    </div>
                                    <div class="item5">  <label>CPL de Destino</label></div>
                                    <div class="item6">
                                        <select id="crs_id_destination" name="crs_id_destination" required="">
                                            <option value="0">Selecionar Crs </option>
                                        <option value="1">Latacunga</option><option value="2">Turi</option><option value="3">CRS GUAYAQUIL VARONES 1</option><option value="4">CRS TULCAN</option><option value="5">NACIONAL</option></select>
                                    </div>
                                    <div class="item7"><labe>Comentario</labe></div>
                                    <div class="item8">
                                        <input type="text" id="trasl_descripcion" name="trasl_descripcion" required="">
                                    </div>
                                    <div class="item9"><labe>Archivos Adjuntos </labe></div>
                                    <div class="item10">
                                        <input type="file" id="file_pdf" name="file_pdf" required="">
                                    </div>
                                    <div class="item11"></div>
                                    <div class="item12"></div>
                                </div>                                
                                <div class="modal-footer">
                                    <!--  <button type="button" class="btn btn-outline pull-left" data-dismiss="modal">Cerrar</button>-->
                                    <!--  <button type="button"  id="btnSent" class="btn btn-outline" onclick="Valid()" >Enviar</button>-->
                                    <input type="submit" name="btnSent" class="btn btn-success submitBtn" value="Enviar">
                                </div>
                            </form>
                            <button id="addRow" class="btn btn-info">Añadir PPL</button>
                            <div style="width:auto; height: 100px; overflow-y: scroll;">
                                <table border="1" id="tblppl" class="display" style="width:100%">
                                    <tbody><tr><th>Identificacion</th><th>Nombres</th><th>Apellidos</th><th>Foto</th><th>Huella</th>
                                    </tr></tbody><tbody>                                    

                                    </tbody>

                                </table>


                            </div>

                        </div>

                    </div>
                    <!-- /.modal-content -->
                </div>
                <!-- /.modal-dialog -->
            </div>
            <!-- /.modal -->


            <!-- /.modal -->


            <!-- /.modal -->


            <!-- /.modal -->
        </section>
        <!-- /.content -->
    </div>

</div>
<script>


    $(document).ready(function () {
        var counter = 1;
        $('#addRow').on('click', function () {
            $('#tblppl tr:first').after(' <tr><td><input type="text"></td><td><input type="text"></td><td><input type="text"></td><td></td><td></td></tr>');
        });
        loadComboboxTraslationType();
        loadComboboxCrs();
        //loadCrsSgp();
        var crs_id = '1';
        loadTraslationList(crs_id);
        
        $("#btnNewTraslation").click(function () {
            var user_id = '1';
            var crs_source_id = '1';
            //var ldate=dateSystem();
            createAdnSendTraslation(user_id, crs_source_id, dateSystem());
        });
    });

    $(document).ready(function (e) {
        $("#fmrCreateTraslation").on('submit', function (e) {
            e.preventDefault();
            if (valid() && validTablePPL()) {


                $.ajax({
                    url: './Controller/TraslationController.php',
                    type: "POST",
                    data: new FormData(this),
                    contentType: false,
                    cache: false,
                    processData: false,
                    beforeSend: function ()
                    {


                    },
                    success: function (result) { //console.log(response);
                        var obj = JSON.parse(result);
                        if (obj.success) {
                            //alert();
                            var id_traslation = $('#idTraslation').val();
                            var i = 0;
                            $("#tblppl tbody tr").each(function () {
                                var textval0 = $(this).find("td").eq(0).find(":text").val();
                                var textval1 = $(this).find("td").eq(1).find(":text").val();
                                var textval2 = $(this).find("td").eq(2).find(":text").val();
                                if ((textval0 != undefined && textval0 != '') && (textval1 != undefined && textval1 != '') && (textval2 != undefined && textval2 != '')) {
                                    // var ddlval = $(this).find("td").eq(2).find("select option:selected").text();                        
                                    //alert("TextBox0: " + textval0 + ";TextBox1: " + textval1+ ";TextBox2: " + textval2+"id trasla"+id_traslation);
                                    i++;
                                    insertPersonPrison(textval0, textval1, textval2, id_traslation);

                                }
                                else {
                                    if (textval0 != undefined || textval1 != undefined || textval2 != undefined) {
                                        alert('Asegurese de que no exista campos vacios en la tabla');
                                    }

                                }

                            });
                            alert('' + i + ': ppls guardados  en traslado Numero: ' + id_traslation);
                            location.reload();
                            clearFields();
                            $('#TraslationNew').modal('hide');

                        }
                    }
                });

            }

        });
        

    });

    $("#file_pdf").change(function () {
        var file = this.files[0];
        var fileType = file.type;
        var match = ['application/pdf'];
        if (!((fileType == match[0]) )) {
            alert('Asegúrese, que sea documentos PDF');
            $("#file").val('');
            return false;
        }
    });

    function valid() {        
        if (jQuery('#trasl_type_id').val() != 0 && jQuery('#crs_id_destination').val() != 0 && jQuery('#trasl_descripcion').val() != '' && jQuery('#file_pdf').val() != '' && jQuery('#txt_date_request_traslation').val() != '')
        {
            return true;
        }
        else
        {
            alert('Todos lo campos son requeridos');
            return false;
        }
    }


  


</script>
                    <!--<input type="button" value="TestAvisoNewCarrera" id="btnAvisoNewCarrera" onclick="callNewCarreraAviso()"/>-->


                </div>
                <!-- /.container-fluid -->

            </div>
            <!-- /#page-wrapper -->

        
        <!-- /#wrapper -->


    


</body></html>